# ✏️ 스터디 기록

- 스터디 일시 : 2022.08.11
- 서기: beenz

## 4장. 아키텍처

### 학습 내용

- MySQL 서버 → MySQL엔진과 스토리지 엔진으로 구성되어 있다.
- MySQL 스레딩 구조 → 포그라운드 / 백그라운드 스레드로 구성된다.
- 메모리 공간 → 글로벌 / 로컬 메모리 영역으로 구분된다.
- MySQL 엔진이 스토리지 엔진에게 데이터 읽기/저장 명령시 반드시 핸들러를 통해야함
- 플러그인 
- 컴포넌트 → 8.0부터 플러그인 아키텍처를 대체하기 위해 컴포넌트 도입
- 쿼리 실행 구조 → 옵티마이저가 DBMS의 두뇌에 해당한다.
- 스레드풀 → 제한된 개수의 스레드 처리에만 집중할 수 있게 해서 서버의 자원소모를 줄이는게 목적
- InnoDB 스토리지 엔진 아키텍처
  - 레코드 기반잠금을 제공해서 동시처리가 가능하고 안정적
  - 버퍼풀이 메모리같은 역할을 한다
  - 프라이머리 키에 의한 클러스터링
  - 외래키를 지원
  - MVCC → 하나의 레코드에 대해 여러개의 버전이 동시에 관리
  - InnoDB 버퍼풀 → 메모리 역할(캐시), 쓰기지연 작업
  - 버퍼풀의 구조 → LRU, 플러시리스트
  - Double Write Buffer 
  - 언두로그(이전버전 백업) → 트랜잭션 보장, 격리수준 보장
  - 리두로그(변경사항을 백업) → 비정상종료시 데이터를 잃지 않게해주는 안전장치
- MyISAM
- 로그
  - 제네럴 쿼리 로그
  - 슬로우 쿼리 로그

#### 궁금한점
- context 스위칭 `p94`
- 세컨더리 인덱스 `p99`
- 구글 프라이머리키 `p105`
- 버퍼풀과 리두로그 파일크기 계산 `p112`
- 클린페이지 LRU `p112`
- 언두슬롯 `p126`
- 어댑티브 해시 인덱스 `p137`

### Issue
- [MySQL 표준 문법으로 작성된 쿼리의 타 DBMS 호환성](https://github.com/Growing-Up-Together/ReadingRecord/issues/12)
  - ANSI 표준 문법이 여러 DBMS에서 호환이 된다는 맥락으로 이해
- [4.1.9 스레드풀](https://github.com/Growing-Up-Together/ReadingRecord/issues/13)
  - BEGIN → QUERY → COMMIT 순으로 동작
  - 우선순위를 적용하여 실행순서를 재배치하여 잠금경합을 낮추고 전체적인 처리 능력을 향상

## 다음주 공지

✔️ 스터디 일정
- 8/17(수) 오후 9시
- 휴가 기간 리프레시 🌿
- 8/30(화) 오후 9시 - 6장
- 9/3(토) 오전 7시 - 7장